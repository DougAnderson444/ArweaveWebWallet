import{_ as C,q as x,m as L,f as B,L as P,r as S,t as F,v as k,w as T,x as V,y as N,z as j}from"./index.4ff3948f.js";import{H as q,d as m,r as E,e as A,j as g,f as v,g as o,k as W,p as d,l as c,T as D,I as U,J as G,o as n,N as p,O as y,s as b,F as M,h as z}from"./vendor.9d5857d8.js";const H={components:{InputData:x,Button:L,Icon:B},setup(){const l=q(),a=m(""),t=E({}),e=A(()=>a.value.trim().split(/\s+/g).length>=12),_=m(!1),h=m(!1),u=m(null),i=async()=>{_.value=!0,a.value=await F();const r=k(a.value);setTimeout(async()=>u.value=await r,1e4)},f=()=>{l.push({name:"EditWallet",query:{wallet:u.value.id}})},s=async()=>{h.value=!0;const r=k(a.value);t.enabled=!0,t.icon="loader",t.message="Importing",t.actions=[],l.push({name:"EditWallet",query:{wallet:(await r).id}})};return{passphraseInput:a,popup:t,isPassphrase:e,create:i,importLedger:async()=>{const r=await N(j);l.push({name:"EditWallet",query:{wallet:r.id}})},supportsWebUSB:()=>!!window.navigator.usb,isCreatingWallet:_,isGeneratingWallet:h,createdWallet:u,goToCreatedWallet:f,importPassphrase:s,confirmPassphrase:async()=>{if(await T(a.value))return s();t.enabled=!0,t.icon="",t.message="This passphrase is not valid, do you want to import it anyway?",t.actions=[{name:"Back",action:()=>t.enabled=!1},{name:"Import Passphrase",action:()=>s()}]},importFile:async r=>{if(!r)return;const I=await V(JSON.parse(await r[0].text()));l.push({name:"EditWallet",query:{wallet:I.id}})},LogoArweave:P,LogoLedger:S}}},w=l=>(U("data-v-38c2d836"),l=l(),G(),l),J={class:"add-wallet flex-column"},O={class:"card"},K=w(()=>o("h2",{style:{display:"flex","justify-content":"space-between"}},[o("span",null,"Passphrase"),o("span",null,"Key file")],-1)),R={class:"flex-column"},Q=w(()=>o("div",null,null,-1)),X=p("Create new wallet"),Y=p("Import passphrase"),Z={style:{flex:"1 1 auto",display:"flex","flex-direction":"column","align-items":"center","justify-content":"space-evenly","margin-bottom":"var(--spacing)"}},$={class:"actions-container flex-row"},ee={class:"card"},ae=w(()=>o("h2",null,"Hardware",-1)),te=p("Ledger"),se=p("Ledger not supported for this browser");function oe(l,a,t,e,_,h){const u=g("InputData"),i=g("Button"),f=g("Icon");return n(),v("div",J,[o("div",O,[K,o("div",R,[W(u,{modelValue:e.passphraseInput,"onUpdate:modelValue":a[0]||(a[0]=s=>e.passphraseInput=s),onFiles:e.importFile,disabled:e.isCreatingWallet,placeholder:"Import passphrase or key file"},null,8,["modelValue","onFiles","disabled"]),Q,!e.isCreatingWallet&&!e.passphraseInput.length?(n(),d(i,{key:0,onClick:a[1]||(a[1]=s=>e.create()),disabled:e.passphraseInput.length&&!e.isPassphrase,icon:e.LogoArweave},{default:c(()=>[X]),_:1},8,["disabled","icon"])):e.isCreatingWallet?(n(),d(i,{key:1,disabled:!e.createdWallet,onClick:e.goToCreatedWallet,icon:e.createdWallet?"":"loader"},{default:c(()=>[p(y(e.createdWallet?"Passphrase saved? Click here to proceed":"Generating, write down the passphrase"),1)]),_:1},8,["disabled","onClick","icon"])):(n(),d(i,{key:2,disabled:!e.isPassphrase||e.isGeneratingWallet,onClick:e.confirmPassphrase},{default:c(()=>[Y]),_:1},8,["disabled","onClick"]))]),W(D,{name:"fade-fast",mode:"in-out"},{default:c(()=>[e.popup.enabled?(n(),v("div",{key:e.popup.message,class:"overlay flex-column"},[o("div",Z,[e.popup.icon?(n(),d(f,{key:0,icon:e.popup.icon,style:{"font-size":"2em"}},null,8,["icon"])):b("",!0),p(" "+y(e.popup.message),1)]),o("div",$,[(n(!0),v(M,null,z(e.popup.actions,s=>(n(),d(i,{key:s.name,onClick:s.action},{default:c(()=>[p(y(s.name),1)]),_:2},1032,["onClick"]))),128))])])):b("",!0)]),_:1})]),o("div",ee,[ae,e.supportsWebUSB()?(n(),d(i,{key:0,onClick:a[2]||(a[2]=s=>e.importLedger()),icon:e.LogoLedger},{default:c(()=>[te]),_:1},8,["icon"])):(n(),d(i,{key:1,disabled:"",icon:e.LogoLedger},{default:c(()=>[se]),_:1},8,["icon"]))])])}var pe=C(H,[["render",oe],["__scopeId","data-v-38c2d836"]]);export{pe as default};
