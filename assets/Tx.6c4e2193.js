import{_ as k,A as w,a as z,F,b as j,c as N,I as T,d as P,L as O,B as V,e as W,h as q,g as G,f as J}from"./index.695e414d.js";import{w as S,o,e as r,r as R,d as v,i as l,O as I,P as L,f as t,j as d,K as u,q as x,x as b,l as H,a2 as U,k as p,y as E,J as g,F as C,z as K,B as M}from"./vendor.1c1e6812.js";const Q={props:["tx"],setup(s){S(()=>s.tx,a=>{console.log(a),!!a},{immediate:!0})}},X={class:"smart-weave"};function Y(s,a,_,e,h,m){return o(),r("div",X," SmartWeave Contract ")}var Z=k(Q,[["render",Y]]);const $={components:{SmartWeave:Z},props:["tx"],setup(s){const a=R({handler:null,loaded:!1,payload:null}),_=v(()=>w.gatewayURL+s.tx.id);return S(()=>s.tx,async()=>{var e,h,m,c,i,n;if(!!s.tx&&(a.handler=null,a.loaded=!1,((e=s.tx.data)==null?void 0:e.size)!=="0"))if(((h=s.tx.data)==null?void 0:h.type)==="application/x.arweave-manifest+json"||((m=s.tx.data)==null?void 0:m.type)==="text/html"||((c=s.tx.data)==null?void 0:c.type)==="application/pdf")a.handler="iframe";else if(((n=(i=s.tx.data)==null?void 0:i.type)==null?void 0:n.split("/")[0])==="image")a.handler="img";else{a.handler="raw";try{if(a.payload=await z.transactions.getData(s.tx.id,{decode:!0,string:!0}),a.payload[0]==="{")try{a.payload=JSON.stringify(JSON.parse(a.payload),null,2),a.handler="json"}catch{}}catch{}}},{immediate:!0}),{gatewayLink:_,data:a}}},ee={key:"iframe",class:"frame-container"},ae=["src"],te={key:"img",class:"frame-container"},se=["src"],ne={key:"smartweave"},oe={key:"json",class:"data-container"},re={class:"raw"};function de(s,a,_,e,h,m){const c=l("SmartWeave");return e.data.handler==="iframe"?I((o(),r("div",ee,[t("iframe",{class:"iframe",src:e.gatewayLink,onLoad:a[0]||(a[0]=i=>e.data.loaded=!0)},null,40,ae)],512)),[[L,e.data.loaded]]):e.data.handler==="img"?I((o(),r("div",te,[t("img",{class:"img",src:e.gatewayLink,onLoad:a[1]||(a[1]=i=>e.data.loaded=!0)},null,40,se)],512)),[[L,e.data.loaded]]):e.data.handler==="smartweave"?(o(),r("div",ne,[d(c,{tx:_.tx},null,8,["tx"])])):e.data.handler==="json"||e.data.handler==="raw"?(o(),r("div",oe,[t("pre",re,u(e.data.payload),1)])):x("",!0)}var ce=k($,[["render",de],["__scopeId","data-v-27a150a6"]]);const ie={components:{Selector:ce,FoldingLayout:F,Address:j,AddressIcon:N,InputGrid:T,Ar:P,LocaleCurrency:O},props:{txId:String},setup(s){const a=v(()=>w.txs[s.txId]),_=v(()=>{var n;return((n=a.value.data)==null?void 0:n.size)!=="0"}),e=v(()=>!a.value.block),h=v(()=>{if(e.value)return"";const n=new Date(a.value.block.timestamp*1e3);return n.toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"})+" "+n.toLocaleTimeString()}),m=b(V,"currentHeight"),c=v(()=>{const n=[];for(const f of a.value.tags)n.push({items:[{name:"",value:f.name,attrs:{disabled:!0}},{name:"",value:f.value,attrs:{disabled:!0}}]});return n});S(()=>s.txId,async()=>{G(s.txId),J()},{immediate:!0});const i=b(W.breakpoints,"verticalContent");return{ArweaveStore:w,tx:a,currentBlock:m,isData:_,isPending:e,date:h,tagsSchema:c,verticalContent:i,humanFileSize:q}}},y=s=>(K("data-v-793791c2"),s=s(),M(),s),le={class:"meta flex-column"},_e={class:"card"},he={class:"row flex-row"},me={class:"item",style:{"font-size":"1.5em"}},ue={class:"row flex-row"},ve={class:"item"},xe={class:"row flex-row"},ye={class:"item"},fe=y(()=>t("h3",null,"Properties",-1)),ge={class:"card flex-column"},ke=y(()=>t("h3",null,"ID",-1)),we={class:"ellipsis"},Se=["href"],pe={key:0},Ie=y(()=>t("h3",null,"Pending",-1)),Le=[Ie],be={key:1},Ce=y(()=>t("h3",null,"Block ",-1)),Ae={class:"ellipsis"},Be=y(()=>t("h3",null,"Data",-1)),De=g("Fee "),ze=g("\xA0"),Fe=g("|"),je=y(()=>t("h3",null,"Tags",-1)),Ne={style:{background:"var(--background2)","border-radius":"var(--border-radius)"}},Te={key:1};function Pe(s,a,_,e,h,m){const c=l("Ar"),i=l("LocaleCurrency"),n=l("AddressIcon"),f=l("Address"),A=l("InputGrid"),B=l("Selector"),D=l("FoldingLayout");return e.tx?(o(),H(D,{key:0},U({left:p(()=>[t("div",le,[t("div",_e,[t("div",he,[t("div",me,[d(c,{class:"ar",ar:e.tx.quantity.ar},null,8,["ar"]),d(i,{class:"secondary-text",ar:e.tx.quantity.ar},null,8,["ar"])])]),t("div",ue,[t("div",ve,[d(n,{address:e.tx.owner.address},null,8,["address"]),d(f,{class:"secondary-text",address:e.tx.owner.address},null,8,["address"])])]),t("div",xe,[t("div",ye,[d(n,{address:e.tx.recipient},null,8,["address"]),d(f,{class:"secondary-text",address:e.tx.recipient},null,8,["address"])])])]),fe,t("div",ge,[t("div",null,[ke,t("div",we,u(e.tx.id),1),e.isData?(o(),r("a",{key:0,href:e.ArweaveStore.gatewayURL+e.tx.id,target:"_blank"},"Link",8,Se)):x("",!0)]),e.isPending?(o(),r("div",pe,Le)):(o(),r("div",be,[Ce,t("div",Ae,u(e.tx.block.id),1),t("span",null,[g(u(e.tx.block.height),1),e.currentBlock?(o(),r(C,{key:0},[g(" / "+u(e.currentBlock),1)],64)):x("",!0)]),t("div",null,u(e.date),1)])),t("div",null,[Be,t("div",null,"Data size "+u(e.humanFileSize(e.tx.data.size)),1),t("div",null,[De,d(c,{class:"ar",ar:e.tx.fee.ar},null,8,["ar"]),ze,d(i,{class:"secondary-text",ar:e.tx.fee.ar},{default:p(()=>[Fe]),_:1},8,["ar"])])])]),e.tagsSchema.length?(o(),r(C,{key:0},[je,t("div",Ne,[d(A,{schema:e.tagsSchema,disabled:""},null,8,["schema"])])],64)):x("",!0),e.verticalContent?(o(),r("br",Te)):x("",!0)])]),_:2},[e.isData?{name:"right",fn:p(()=>[d(B,{tx:e.tx,class:E(["selector",{inline:!e.verticalContent}])},null,8,["tx","class"])])}:void 0]),1024)):x("",!0)}var We=k(ie,[["render",Pe],["__scopeId","data-v-793791c2"]]);export{We as default};
