import{_ as P,q as L,m as B,f as V,r as S,t as F,u as W,a as q,v as E,w as N,L as T}from"./index.9691e64b.js";import{G as j,d as u,r as G,e as k,j as g,f,g as t,k as C,p as d,l as c,T as A,z as D,C as U,o as l,K as p,L as w,s as I,F as z,h as H}from"./vendor.3670e393.js";const K={components:{InputData:L,Button:B,Icon:V},setup(){const o=j(),a=u(""),s=G({}),e=k(()=>a.value.trim().split(/\s+/g).length>=12),y=k(()=>!0),v=u(!1),m=u(!1),r=u(null),h=async()=>{const i=await W(await q.wallets.generate());o.push({name:"EditWallet",query:{wallet:i.id}})},n=()=>{o.push({name:"EditWallet",query:{wallet:r.value.id}})},b=async()=>{m.value=!0;const i=E(a.value);s.enabled=!0,s.icon="loader",s.message="Importing",s.actions=[],o.push({name:"EditWallet",query:{wallet:(await i).id}})};return{passphraseInput:a,popup:s,isPassphrase:e,isValidPassphrase:y,create:h,importLedger:async()=>{const i=await N(T);o.push({name:"EditWallet",query:{wallet:i.id}})},supportsWebUSB:()=>!!window.navigator.usb,isCreatingWallet:v,isGeneratingWallet:m,createdWallet:r,goToCreatedWallet:n,importPassphrase:b,confirmPassphrase:()=>{s.enabled=!0,s.icon="",s.message="This passphrase is not valid, do you want to import it anyway?",s.actions=[{name:"Back",action:()=>s.enabled=!1},{name:"Import Passphrase",action:()=>b()}]},importFile:async i=>{if(!i)return;const x=await W(JSON.parse(await i[0].text()));o.push({name:"EditWallet",query:{wallet:x.id}})},logoArweave:S,logoLedger:F}}},_=o=>(D("data-v-6280b6de"),o=o(),U(),o),J={class:"add-wallet flex-column"},M={class:"card"},O=_(()=>t("h2",{style:{display:"flex","justify-content":"space-between"}},[t("span",null,"Passphrase"),t("span",null,"Key file")],-1)),R={class:"flex-column"},Q=_(()=>t("span",{class:"secondary-text"},"Note: Generating passphrase is temporarily disabled. However, you can always generate it somewhere else and import",-1)),X=_(()=>t("div",null,null,-1)),Y=p("Create new wallet"),Z=p("Import passphrase"),$={style:{flex:"1 1 auto",display:"flex","flex-direction":"column","align-items":"center","justify-content":"space-evenly","margin-bottom":"var(--spacing)"}},ee={class:"actions-container flex-row"},ae={class:"card"},se=_(()=>t("h2",null,"Hardware",-1)),te=p("Ledger"),oe=p("Ledger not supported for this browser");function ne(o,a,s,e,y,v){const m=g("InputData"),r=g("Button"),h=g("Icon");return l(),f("div",J,[t("div",M,[O,t("div",R,[Q,C(m,{modelValue:e.passphraseInput,"onUpdate:modelValue":a[0]||(a[0]=n=>e.passphraseInput=n),onFiles:e.importFile,disabled:e.isCreatingWallet,placeholder:"Import passphrase or key file"},null,8,["modelValue","onFiles","disabled"]),X,!e.isCreatingWallet&&!e.passphraseInput.length?(l(),d(r,{key:0,onClick:a[1]||(a[1]=n=>e.create()),disabled:e.passphraseInput.length&&!e.isPassphrase,icon:e.logoArweave},{default:c(()=>[Y]),_:1},8,["disabled","icon"])):e.isCreatingWallet?(l(),d(r,{key:1,disabled:!e.createdWallet,onClick:e.goToCreatedWallet,icon:e.createdWallet?"":"loader"},{default:c(()=>[p(w(e.createdWallet?"Passphrase saved? Click here to proceed":"Generating, write down the passphrase"),1)]),_:1},8,["disabled","onClick","icon"])):(l(),d(r,{key:2,disabled:!e.isPassphrase||e.isGeneratingWallet,onClick:a[2]||(a[2]=n=>e.isValidPassphrase?e.importPassphrase():e.confirmPassphrase())},{default:c(()=>[Z]),_:1},8,["disabled"]))]),C(A,{name:"fade-fast",mode:"in-out"},{default:c(()=>[e.popup.enabled?(l(),f("div",{key:e.popup.message,class:"overlay flex-column"},[t("div",$,[e.popup.icon?(l(),d(h,{key:0,icon:e.popup.icon,style:{"font-size":"2em"}},null,8,["icon"])):I("",!0),p(" "+w(e.popup.message),1)]),t("div",ee,[(l(!0),f(z,null,H(e.popup.actions,n=>(l(),d(r,{key:n.name,onClick:n.action},{default:c(()=>[p(w(n.name),1)]),_:2},1032,["onClick"]))),128))])])):I("",!0)]),_:1})]),t("div",ae,[se,e.supportsWebUSB()?(l(),d(r,{key:0,onClick:a[3]||(a[3]=n=>e.importLedger()),icon:e.logoLedger},{default:c(()=>[te]),_:1},8,["icon"])):(l(),d(r,{key:1,disabled:"",icon:e.logoLedger},{default:c(()=>[oe]),_:1},8,["icon"]))])])}var me=P(K,[["render",ne],["__scopeId","data-v-6280b6de"]]);export{me as default};
